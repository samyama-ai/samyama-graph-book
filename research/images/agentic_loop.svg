<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#555" />
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="#ffffff"/>
  <text x="400" y="40" font-family="Helvetica, Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Agentic Enrichment Loop</text>

  <!-- Nodes -->
  <g transform="translate(50, 150)">
    <rect width="160" height="80" rx="10" fill="#ffcdd2" stroke="#e53935" stroke-width="2" filter="url(#shadow)"/>
    <text x="80" y="35" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">1. Event Trigger</text>
    <text x="80" y="60" font-family="Helvetica, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">Query miss / Creation</text>
  </g>

  <g transform="translate(260, 150)">
    <rect width="160" height="80" rx="10" fill="#e1f5fe" stroke="#1e88e5" stroke-width="2" filter="url(#shadow)"/>
    <text x="80" y="35" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">2. LLM Agent</text>
    <text x="80" y="60" font-family="Helvetica, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">Reasoning &amp; Plan</text>
  </g>

  <g transform="translate(470, 50)">
    <rect width="160" height="80" rx="10" fill="#e1bee7" stroke="#8e24aa" stroke-width="2" filter="url(#shadow)"/>
    <text x="80" y="35" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">3a. Tool Use</text>
    <text x="80" y="60" font-family="Helvetica, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">Web / API Search</text>
  </g>

  <g transform="translate(470, 250)">
    <rect width="160" height="80" rx="10" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" filter="url(#shadow)"/>
    <text x="80" y="35" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">3b. Data Parsing</text>
    <text x="80" y="60" font-family="Helvetica, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">Unstructured â†’ JSON</text>
  </g>

  <g transform="translate(680, 150)">
    <rect width="100" height="80" rx="10" fill="#c8e6c9" stroke="#43a047" stroke-width="2" filter="url(#shadow)"/>
    <text x="50" y="35" font-family="Helvetica, Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">4. Update</text>
    <text x="50" y="60" font-family="Helvetica, Arial, sans-serif" font-size="12" text-anchor="middle" fill="#555">Graph Write</text>
  </g>

  <!-- Flow -->
  <line x1="210" y1="190" x2="260" y2="190" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>
  
  <path d="M420,190 L445,190 L445,90 L470,90" stroke="#555" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M630,90 L655,90 L655,290 L630,290" stroke="#555" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M470,290 L445,290 L445,230" stroke="#555" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <path d="M445,230 L445,190" stroke="#555" stroke-width="2" fill="none" stroke-dasharray="4"/>
  <text x="450" y="210" font-family="Helvetica, Arial, sans-serif" font-size="10" fill="#555">Iterate</text>

  <line x1="630" y1="290" x2="730" y2="290" stroke="#555" stroke-width="2" stroke-opacity="0" /> <!-- Spacer -->
  <path d="M550,330 L550,360 L730,360 L730,230" stroke="#555" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

</svg>